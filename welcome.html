<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bienvenido - NexMe</title>
    <meta name="theme-color" content="#1a1a1a">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #1a1a1a;
            color: #fff;
            min-height: 100vh;
            padding: 60px 32px 120px;
            position: relative;
        }
        
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.03;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg width='800' height='800' viewBox='0 0 800 800' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 0 L50 800 M150 0 L150 800 M300 0 L300 800 M450 0 L450 800 M550 0 L550 800 M700 0 L700 800 M0 100 L800 100 M0 250 L800 250 M0 400 L800 400 M0 550 L800 550 M0 700 L800 700 M0 50 L200 150 L400 50 L600 200 L800 100 M0 300 L150 400 L350 300 L500 450 L700 350 L800 400 M0 600 L100 500 L300 650 L500 550 L650 700 L800 600 M100 0 L250 200 L100 400 L300 600 L150 800 M500 0 L600 150 L450 350 L600 500 L500 700 L650 800 M750 0 L700 200 L800 350 M0 150 L100 100 M700 750 L800 700' stroke='%23ffffff' stroke-width='1' fill='none'/%3E%3C/svg%3E");
            background-size: 600px 600px;
        }
        
        .content {
            position: relative;
            z-index: 1;
        }
        
        .logo-letter {
            font-size: 64px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 35px;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3), 0 0 40px rgba(255, 255, 255, 0.2), 0 0 60px rgba(255, 255, 255, 0.1);
        }
        
        .main-title {
            font-size: 32px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 60px;
            line-height: 1.2;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section-title {
            font-size: 15px;
            font-weight: 600;
            color: #fff;
            margin-bottom: 8px;
        }
        
        .section-text {
            font-size: 15px;
            font-weight: 400;
            color: #a0a0a0;
            line-height: 1.6;
        }
        
        .permissions-text {
            font-size: 12px;
            color: #666;
            line-height: 1.5;
            margin-top: 40px;
        }
        
        .continue-btn {
            position: fixed;
            bottom: 40px;
            left: 32px;
            right: 32px;
            padding: 16px 32px;
            background: #2d2d2d;
            border: 1px solid #3d3d3d;
            border-radius: 8px;
            color: #fff;
            font-size: 16px;
            font-weight: 500;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .bottom-fade {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 140px;
            background: linear-gradient(to bottom, transparent 0%, #1a1a1a 50%);
            pointer-events: none;
            z-index: 1;
        }
        
        .continue-btn.ready {
            background: #2d2d2d;
        }
        
        .spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    
    <div class="content">
        <div class="logo-letter">N</div>
        
        <h1 class="main-title">Bienvenido a<br>NexMe</h1>
        
        <div class="section">
            <h2 class="section-title">Conecta en el mundo real</h2>
            <p class="section-text">Encuentra personas compatibles cerca de ti. Esa persona especial podría estar a solo unos metros de distancia. Descúbrela en el mapa, inicia una conversación y conócela hoy mismo.</p>
        </div>
        
        <div class="section">
            <h2 class="section-title">Tu privacidad importa</h2>
            <p class="section-text">Solo eres visible mientras usas la app. Al cerrar sesión, desapareces del radar inmediatamente.</p>
        </div>
        
        <p class="permissions-text">Al continuar, aceptas el acceso a tu ubicación y cámara para el funcionamiento de la app.</p>
    </div>
    
    <div class="bottom-fade"></div>
    
    <button class="continue-btn" id="continueBtn" onclick="continueToApp()">
        <span id="btnText">Preparando...</span>
        <div class="spinner" id="btnSpinner"></div>
    </button>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAhcfX0M5oqX7rZ6WdCZaHfxHKcxySxQl8",
            authDomain: "radar-social-5a61f.firebaseapp.com",
            projectId: "radar-social-5a61f",
            storageBucket: "radar-social-5a61f.firebasestorage.app",
            messagingSenderId: "1010787643000",
            appId: "1:1010787643000:web:e9dc6a1c175d875b90478d"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        
        let gpsReady = false;
        let userLocation = null;
        
        // Check if user is logged in
        auth.onAuthStateChanged(user => {
            if (!user) {
                window.location.href = 'index.html';
            }
        });
        
        // Start getting GPS in background
        function initGPS() {
            if ('geolocation' in navigator) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        gpsReady = true;
                        updateButton();
                    },
                    (error) => {
                        console.log('GPS error:', error);
                        // Still allow to continue, radar-social will handle it
                        gpsReady = true;
                        updateButton();
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 15000,
                        maximumAge: 0
                    }
                );
            } else {
                gpsReady = true;
                updateButton();
            }
        }
        
        function updateButton() {
            const btn = document.getElementById('continueBtn');
            const text = document.getElementById('btnText');
            const spinner = document.getElementById('btnSpinner');
            
            if (gpsReady) {
                text.textContent = 'Continuar';
                spinner.style.display = 'none';
                btn.classList.add('ready');
            }
        }
        
        function continueToApp() {
            if (gpsReady) {
                // Store location for radar-social to use
                if (userLocation) {
                    sessionStorage.setItem('initialLocation', JSON.stringify(userLocation));
                }
                window.location.href = 'radar-social.html';
            }
        }
        
        // Start GPS when page loads
        initGPS();
    </script>
</body>
</html>
